<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="generator" content="Doxygen 1.10.0"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>cmf: Windows installation</title>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
    <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
    <script type="text/javascript">
        DoxygenAwesomeDarkModeToggle.init()
        DoxygenAwesomeFragmentCopyButton.init()
    </script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js"></script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="cmf-logo-2018.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
  <div id="projectnumber">2.0.0b10</div>
   <div id="projectbrief">catchment modelling framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('cmf_install_windows.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Windows installation</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="cmf_install.html">back...</a></p>
<h1>Python 3</h1>
<h2>Without geometry</h2>
<p>This is the simplest way to install cmf on Windows. It shows one path, that should be suitable for most computers with a Windows system. Alternatives are listed below</p>
<ul>
<li>Get a recent winpython distribution from (<a href="http://sourceforge.net/projects/winpython/">http://sourceforge.net/projects/winpython/</a>). Today the 64bit variant should run on most computers.</li>
<li>"Install" it to any directory on your computer, eg. C:\Apps</li>
</ul>
<p>Open the WinPython Command Prompt and type </p><pre class="fragment">pip install cmf
</pre> <h2>Adding Geometry</h2>
<p>Just get the shapely binary from:</p>
<p><a href="http://www.lfd.uci.edu/~gohlke/pythonlibs/#shapely">http://www.lfd.uci.edu/~gohlke/pythonlibs/#shapely</a></p>
<p>and install it with the pacakge manager of your python distribution. Eg. use the Winpython Control Panel for winpython.</p>
<h2>Compile cmf for Python 3 with Visual Studio</h2>
<h3>Prerequisites</h3>
<p>To compile cmf2 you need the following installed on your computer:</p>
<ul>
<li>Buildtools for Visual Studio from <a href="https://visualstudio.microsoft.com/de/downloads/">https://visualstudio.microsoft.com/de/downloads/</a>. Please check Python and Visual Studio compiler version at <a href="https://pythondev.readthedocs.io/windows.html">https://pythondev.readthedocs.io/windows.html</a></li>
<li>A Python (&gt;3.6)) installation, preferably a scientific distribution like WinPython or Anaconda, including pip</li>
<li>The CMF source code. Get it using Git or download a ZIP from GitHub.com (<a href="https://github.com/philippkraft/cmf">https://github.com/philippkraft/cmf</a>)</li>
<li>Optional: SWIG from swig.org (in the path). If you plan to change the C++ API of CMF you need to generate the Python interface with SWIG again. accessible from <br  />
</li>
</ul>
<h3>Installation of requirements</h3>
<p>Open a Visual Studio Development Command Prompt and make sure the right python installation is in the path (eg. python -VV). Navigate to the cmf source code. It is a good idea to create a virtual environment (venv) for the compilation</p>
<p>Check if nmake is in the path, if you get an error message you are not using the Visual Studio Development Command Prompt or you have not installed the Build Tools properly </p><pre class="fragment">nmake /?
</pre><p> Install the requirements </p><pre class="fragment">pip install -r requirements.txt
</pre><p> Install cmake </p><pre class="fragment">pip install cmake
</pre> <h3>One-Step installation of CMF</h3>
<p>Installing and compiling CMF takes some time. The easiest way is to just install cmf from the source directory using pip install. In case of problems, it is better to compile CMF step by step (see below) </p><pre class="fragment">pip install . -v
</pre><p> The <code>-v</code> stands for verbose, to give more output</p>
<h3>Step by step installation of CMF</h3>
<p>Compiling and installing of cmf consists of the following steps</p>
<ol type="1">
<li>Download the source code of the solvers in CMF (suitesparse and sundials) and build them</li>
<li>Build the CMF C++ library linking the solvers</li>
<li>Build the Python extension and link it with the libraries</li>
<li>Build the Python tools for CMF</li>
<li>Install the whole library in your Python installation</li>
<li>Test it</li>
</ol>
<h4>Build the solvers (1)</h4>
<pre class="fragment">tools\install_solvers.bat
</pre><p> The source code for the solvers is downloaded to <code>build\extern</code>, the built libraries are stored in the <code>lib</code> directory</p>
<h4>Build the CMF C++ Library (2)</h4>
<pre class="fragment">tools\install_cmf_core.bat
</pre><p> There are a couple of test executables build together with cmf. These executables can be found in the directory <code>bin</code>. The static library is together with the solver libraries in <code>lib\lib</code></p>
<h4>Build and link the Python extension (3)</h4>
<pre class="fragment">python setup.py build_ext
</pre><p> If the C++ API has been changed, build the wrapper interface newly with </p><pre class="fragment">python setup.py build_ext swig
</pre> <h4>Build the Python tools</h4>
<pre class="fragment">python setup.py build_py
</pre> <h4>Install the package to the current python version</h4>
<pre class="fragment">python setup.py install
</pre> <h4>Test cmf</h4>
<p>Do not fire up a python command prompt and import cmf in the source directory. This will fail.</p>
<p>Either change the directory first or run the cmf tests with </p><pre class="fragment">tools\test.bat
</pre><p> This will take care of the necessary directory change</p>
<h3>Deployment of the compiled version</h3>
<p>You can distribute your compiled version to other Windows users by building a binary wheel. </p><pre class="fragment">python setup.py bdist_wheel
</pre><p> or </p><pre class="fragment">pip wheel .
</pre><p> The .whl file is in the <code>dist</code> directory and can be easily shared between computers.</p>
<h4>Note:</h4>
<p>The .whl is ony suitable for the same Python version, architecture (x64/x86) and operating system (Windows). If you are distributing a compiled version of CMF, it is required by the licence to give the receivers of the binary package access to the source that has been used to compile the binary. In case of an unchanged CMF a link to the CMF code repository is sufficient. If you have made changes to the source code, you are responsible to provide the receiver with your source code, which inherits the GNU Public Licence from CMF.</p>
<h2>Compile CMF2 for Python 3 with the Windows Subsystem for Linux (WSL)</h2>
<p>Just follow the instructions for installing CMF on Linux </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<hr class="footer"/><address class="footer"><small>
<div>&copy 2008-2017 by 
<a class="el" href="http://www.uni-giessen.de/hydro/kraft"> Philipp Kraft</a> and
<a class="el" href="http://www.uni-giessen.de/hydro"> 
Institute of Landscape Ecology and Resources Management,University of Gie&szlig;en</a>
</h3></td>
<td>Generated: Fri Jan 19 2024 16:10:56</td>
</tr></table>
</small></address>
</body>
</html>
