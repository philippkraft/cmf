<!-- HTML header for doxygen 1.8.14-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=9"/>
    <meta name="generator" content="Doxygen 1.10.0"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <title>cmf: Interception</title>
    <link href="tabs.css" rel="stylesheet" type="text/css"/>
    <script type="text/javascript" src="jquery.js"></script>
    <script type="text/javascript" src="dynsections.js"></script>
    <script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
    <script type="text/javascript" src="doxygen-awesome-fragment-copy-button.js"></script>
    <script type="text/javascript">
        DoxygenAwesomeDarkModeToggle.init()
        DoxygenAwesomeFragmentCopyButton.init()
    </script>
    <link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="cookie.js"></script>
    <link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
    <script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.4/MathJax.js"></script>
    <link href="doxygen.css" rel="stylesheet" type="text/css" />
    <link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="cmf-logo-2018.svg"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
  <div id="projectnumber">2.0.0b10</div>
   <div id="projectbrief">catchment modelling framework</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('cmf_tut_intercept.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Interception</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="el" href="cmf_tut_e_t.html">back...</a> <a class="el" href="cmf_tut_snow.html">next...</a></p>
<p>For this tutorial we are going to setup a simplified version (1 Layer) of the 1D Model to observe the effect of above ground fluxes. The same model will be used in the next tutorial about snow. As an excercise, try to put this model together with the 1D Richards model with ET from the last tutorial.</p>
<h2>Simple 1 storage model, still with out interception</h2>
<h3>Setup code</h3>
<ol type="1">
<li>we create a project and a cell (you know this stuff by now...)</li>
<li>We add a layer of 1m water capacity</li>
<li>We add a groundwater boundary condition with free drainage</li>
</ol>
<div class="fragment"><div class="line"><span class="keyword">import</span> cmf</div>
<div class="line">p = <a class="code hl_class" href="classcmf_1_1project.html">cmf.project</a>()</div>
<div class="line">c = p.NewCell(0,0,0,1000,<span class="keyword">True</span>)</div>
<div class="line"><span class="comment"># Add a single layer of 1 m depth</span></div>
<div class="line">l = c.add_layer(1.0, cmf.VanGenuchtenMualem())</div>
<div class="line"><span class="comment"># Add a groundwater boundary condition</span></div>
<div class="line">gw = p.NewOutlet(<span class="stringliteral">&#39;gw&#39;</span>,0,0,-2)</div>
<div class="line"><span class="comment"># Use a free drainage connection to the groundwater</span></div>
<div class="line">cmf.FreeDrainagePercolation(l,gw)</div>
<div class="line"> </div>
<div class="line"><span class="comment"># Add some rainfall</span></div>
<div class="line">c.set_rainfall(5.0)</div>
<div class="ttc" id="aclasscmf_1_1project_html"><div class="ttname"><a href="classcmf_1_1project.html">cmf::project</a></div><div class="ttdoc">The study area, holding all cells, outlets and streams.</div><div class="ttdef"><b>Definition</b> project.h:53</div></div>
</div><!-- fragment --><h3>Runtime and plot code</h3>
<div class="fragment"><div class="line">solver = cmf.CVodeIntegrator(p,1e-9)</div>
<div class="line">res = [l.volume <span class="keywordflow">for</span> t <span class="keywordflow">in</span> solver.run(solver.t,solver.t+cmf.day,cmf.min*15)]</div>
<div class="line">plot(res)</div>
</div><!-- fragment --><h2>Create a canopy storage</h2>
<div class="image">
<img src="canopyflow.png" alt=""/>
</div>
    <p>Now we will extend our model with a canopy storage. In the figure on the right side, you can see how the canopy storage should be connected. The incoming rainfall, that has been routed before directly to the surface water is now split into intercepted rainfall, routed to the new canopy storage, and throughfall, routed still routed to the surface water. The fraction of intercepted rainfall is triggered by the variable canopy closure of the cell's <a class="el" href="classcmf_1_1upslope_1_1vegetation_1_1_vegetation.html">Vegetation</a> <code>cell.vegetation.CanopyClosure</code>. If this variable is 1, all rainfall is intercepted, and there is no throughfall. However, the predifined connection between rainfall and surface water is not aware of the canopy storage, hence both connections (<a class="el" href="classcmf_1_1upslope_1_1connections_1_1_rainfall.html">Rainfall</a>) need to be newly defined (see code below).</p>
<p>The second connection needed, is the overflow of the canopy. The leaves of the canopy can only store a limited volume of water, if this volume is reached, the canopy starts dripping. One of the best known models for the interception process is the model by Rutter et al. 1971. The overflow term of the model is implemented in cmf as <a class="el" href="classcmf_1_1upslope_1_1connections_1_1_rutter_interception.html">RutterInterception</a>. A special characteristik of the model is, that drippig stops together with rainfall. The capacity of the canopy storage is defined as the product of the leaf area index (<code>cell.vegetation.LAI</code>) and the capacity in mm per m2 leaf area <code>cell.vegetation.CanopyCapacityPerLAI</code>. To define which amount of water is directly routed to the surfaces as throughfall without being storaged in the canopy the canopy closure can be defined <code>cell.vegetation.CanopyClosure</code>. The default value of the canopy closure is 1, so there is no direct throughfall if it remains unchanged.</p>
<p>The third term of the Rutter model is the evaporation from the wet leaf surface. Currently only the Penman based <a class="el" href="classcmf_1_1upslope_1_1_e_t_1_1_canopy_storage_evaporation.html">CanopyStorageEvaporation</a> and <a class="el" href="classcmf_1_1upslope_1_1_e_t_1_1_shuttleworth_wallace.html">ShuttleworthWallace</a> do this calculation.</p>
<p>The code below can be used to extend the setup code for the simple model above.</p>
<div class="fragment"><div class="line"><span class="comment"># Make c.canopy a water storage</span></div>
<div class="line">c.add_storage(<span class="stringliteral">&#39;Canopy&#39;</span>,<span class="stringliteral">&#39;C&#39;</span>)</div>
<div class="line"><span class="comment"># Split the rainfall from the rain source (RS) between </span></div>
<div class="line"><span class="comment"># intercepted rainfall (RS-&gt;canopy) and throughfall (RS-surface)</span></div>
<div class="line">cmf.Rainfall(c.canopy,c,<span class="keyword">False</span>,<span class="keyword">True</span>) <span class="comment"># RS-&gt;canopy, only intercepted rain</span></div>
<div class="line">cmf.Rainfall(c.surfacewater,c,<span class="keyword">True</span>,<span class="keyword">False</span>) <span class="comment"># RS-&gt;surface, only throughfall</span></div>
<div class="line"><span class="comment"># Use an overflow mechanism, eg. the famous Rutter-Interception Model</span></div>
<div class="line">cmf.RutterInterception(c.canopy,c.surfacewater,c) </div>
<div class="line"><span class="comment"># And now the evaporation from the wet canopy (using a classical Penman equation)</span></div>
<div class="line">cmf.CanopyStorageEvaporation(c.canopy,c.evaporation,c)</div>
</div><!-- fragment --> </div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<hr class="footer"/><address class="footer"><small>
<div>&copy 2008-2017 by 
<a class="el" href="http://www.uni-giessen.de/hydro/kraft"> Philipp Kraft</a> and
<a class="el" href="http://www.uni-giessen.de/hydro"> 
Institute of Landscape Ecology and Resources Management,University of Gie&szlig;en</a>
</h3></td>
<td>Generated: Fri Jan 19 2024 16:10:56</td>
</tr></table>
</small></address>
</body>
</html>
